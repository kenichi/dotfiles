#!/usr/bin/env ruby

require 'celluloid'

CWD = '%s/.vim/bundle' % ENV['HOME']
Dir.chdir CWD

class Coer
  include Celluloid

  def co repo
    d = File.join CWD, repo.split('/').last
    if File.exist? d and File.directory? d
      puts 'updating %s...' % repo
      system 'git pull', chdir: d
    else
      system "git clone https://github.com/#{repo}", chdir: CWD
    end
    true
  end

end

co_pool = Coer.new

%w[

  vim-ruby/vim-ruby
  rizzatti/dash.vim
  rizzatti/funcoo.vim
  mattn/emmet-vim
  majutsushi/tagbar
  altercation/vim-colors-solarized
  tpope/vim-fugitive
  tpope/vim-markdown
  tpope/vim-repeat
  tpope/vim-surround
  scrooloose/nerdtree
  bling/vim-airline
  pangloss/vim-javascript
  fatih/vim-go
  kien/ctrlp.vim
  NLKNguyen/papercolor-theme
  rking/ag.vim

].map {|repo| co_pool.future.co repo}.map &:value
